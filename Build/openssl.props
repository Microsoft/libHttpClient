<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <HCSettingsFile>$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), hc_settings.props))\hc_settings.props</HCSettingsFile>
  </PropertyGroup>
  <Import Project="$(HCSettingsFile)" Condition="Exists($(HCSettingsFile)) AND '$(HCSettingsImported)' != 'true'" />
  <PropertyGroup>
    <HCSettingsImported>true</HCSettingsImported>
  </PropertyGroup>   
  <PropertyGroup>
    <BuildRoot>$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), build.root))\</BuildRoot>
    <opensslSourceRoot>$(BuildRoot)External\openssl\</opensslSourceRoot>
    <generatedHeaders>$(BuildRoot)External\generatedHeaders\</generatedHeaders>
    <opensslOutdir>$(libHttpClientOutDir)</opensslOutdir>
    <opensslOutdir Condition="'$(opensslOutdir)' == ''">$(BuildRoot)</opensslOutdir>
    <libcryptoPath>$(opensslOutdir)Binaries\$(Configuration)\$(Platform)\libcrypto\</libcryptoPath>
    <libsslPath>$(opensslOutdir)Binaries\$(Configuration)\$(Platform)\libssl\</libsslPath>
  </PropertyGroup>
  <ItemDefinitionGroup Label="ImportOpenSSL" Condition="'$(ProjectName)' != 'libcrypto' AND '$(ProjectName)' != 'libssl'">
    <ClCompile>
      <AdditionalIncludeDirectories>%(AdditionalIncludeDirectories);$(opensslSourceRoot)include;$(generatedHeaders)win32</AdditionalIncludeDirectories>
    </ClCompile>
    <Link>
      <AdditionalDependencies>%(AdditionalDependencies);Crypt32.lib;libssl.lib;libcrypto.lib</AdditionalDependencies>
      <AdditionalLibraryDirectories>%(AdditionalLibraryDirectories);$(libcryptoPath);$(libsslPath)</AdditionalLibraryDirectories>
    </Link>
  </ItemDefinitionGroup>
</Project>
