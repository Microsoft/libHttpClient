if (!pluginManager.hasPlugin("com.android.base")) {
    throw new GradleException("An Android plugin must be applied to use this script")
}

android {
    compileSdkVersion 27
    ndkVersion "22.0.7026061"

    defaultConfig {
        targetSdkVersion 21
        minSdkVersion 21
    }

    buildTypes {
        debug {
            externalNativeBuild {
                cmake {
                    // This is provided by default, but making it
                    // explicit here to avoid build magic.
                    arguments "-DCMAKE_BUILD_TYPE=Debug"

                    if (project.hasProperty("HC_NOWEBSOCKETS")) {
                        arguments << "-DHC_NOWEBSOCKETS=1"
                    }
                }
            }
        }

        release {
            externalNativeBuild {
                cmake {
                    // This is actually not provided by default,
                    // so we need to set it ourselves.
                    arguments "-DCMAKE_BUILD_TYPE=Release"

                    if (project.hasProperty("HC_NOWEBSOCKETS")) {
                        arguments << "-DHC_NOWEBSOCKETS=1"
                    }
                }
            }
        }
    }
}

project.ext."libhc_common_android_config_applied" = true
